<div class="orders-page page">
  <div class="d-flex justify-content-between">
    <h2>
      Orders
      <button
        type="button"
        [routerLink]="['/orders/', 'create']"
        *ngIf="authService.getUserRole() == 'client'"
        class="btn btn-warning"
      >
        New order
      </button>
    </h2>
  </div>
  <div class="alert alert-warning" role="alert">
    Total number of orders: {{ count }}
  </div>

  <table class="table table-hover">
    <thead>
      <tr>
        <th scope="col">Driver</th>
        <th scope="col">Origin address</th>
        <th scope="col">Destination</th>
        <th scope="col">Payment</th>
        <th scope="col">Date</th>

        <th scope="col">Approved</th>
      </tr>
    </thead>
    <tbody>
      <tr
        *ngFor="let order of orders; first as isFirst"
        [routerLink]="['/orders/', order.order_id]"
      >
        <td>{{ order.driver_id | json }}</td>
        <td>{{ order.origin_address }}</td>
        <td>{{ order.destination_address }}</td>
        <td>{{ order.total_payment | json }}</td>
        <td>{{ order.creation_date | date: "MM/dd/yy, h:mm a" }}</td>
        <td *ngIf="!order.approved">
          <svg
            aria-hidden="true"
            focusable="false"
            data-prefix="fas"
            data-icon="xmark"
            class="svg-inline--fa fa-xmark"
            role="img"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 320 512"
          >
            <path
              fill="currentColor"
              d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"
            ></path>
          </svg>
        </td>

        <td *ngIf="order.approved">
          <svg
            aria-hidden="true"
            focusable="false"
            data-prefix="fas"
            data-icon="check"
            class="svg-inline--fa fa-check"
            role="img"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 512 512"
          >
            <path
              fill="currentColor"
              d="M480 128c0 8.188-3.125 16.38-9.375 22.62l-256 256C208.4 412.9 200.2 416 192 416s-16.38-3.125-22.62-9.375l-128-128C35.13 272.4 32 264.2 32 256c0-18.28 14.95-32 32-32c8.188 0 16.38 3.125 22.62 9.375L192 338.8l233.4-233.4C431.6 99.13 439.8 96 448 96C465.1 96 480 109.7 480 128z"
            ></path>
          </svg>
        </td>
      </tr>
    </tbody>
  </table>
  <nav>
    <ul class="pagination justify-content-center">
      <li
        *ngFor="let page of [].constructor(pages); let i = index"
        class="page-item"
      >
        <a class="page-link" (click)="getOrders(i + 1)">{{ i + 1 }}</a>
      </li>
    </ul>
  </nav>
</div>

<router-outlet></router-outlet>
